{% extends 'base.html' %}
{% block title %}GardenCircle â€” PrÃ­spevky{% endblock %}
{% block content %}
  <section id="feed" class="card full">
    <header class="section-header">
      <h2>PrÃ­spevky</h2>
      <p class="muted">Pridaj skÃºsenosÅ¥ alebo otÃ¡zku â€“ komunita ti poradÃ­.</p>
    </header>

    <form id="postForm" class="post-form" aria-label="PridaÅ¥ prÃ­spevok" method="post" action="/api/posts">
      <label for="postInput" class="visually-hidden">Tvoje zdieÄ¾anie</label>
      <textarea name="content" id="postInput" rows="2" placeholder="NapÃ­Å¡ svoj problÃ©m alebo skÃºsenosÅ¥..." required></textarea>
      <div class="form-row">
        <input name="author" id="authorInput" type="text" placeholder="Tvoje meno (nepovinnÃ©)">
        <button type="submit" class="btn primary">PridaÅ¥ prÃ­spevok</button>
      </div>
    </form>

    <ul id="postList" class="post-list" aria-live="polite">
      {% if posts %}
        {% for p in posts %}
          <li class="post-card" data-id="{{ p.id }}">
            <div class="post-header">
              <div class="meta">
                <strong class="author">{{ p.author }}</strong>
                <time class="time">{{ p.created_at }}</time>
              </div>
              <div class="post-actions">
                <a class="btn small" href="/posts/{{ p.id }}">OtvoriÅ¥</a>
              </div>
            </div>
            <p class="post-content">{{ p.content }}</p>
            {% if p.image_path %}
              <img src="{{ p.image_path }}" alt="ObrÃ¡zok prÃ­spevku" style="width:100%;border-radius:12px;margin-top:.5rem">
            {% endif %}
          </li>
        {% endfor %}
      {% else %}
        <li class="muted">ZatiaÄ¾ Å¾iadne prÃ­spevky â€” buÄ prvÃ½!</li>
      {% endif %}
    </ul>
  </section>
  
  <template id="post-template">
    <li class="post-card">
      <div class="post-header">
        <div class="meta">
          <strong class="author"></strong>
          <time class="time" datetime=""></time>
        </div>
        <div class="post-actions">
          <button class="btn small delete-post" title="VymazaÅ¥ prÃ­spevok">ğŸ—‘ï¸</button>
        </div>
      </div>
      <p class="post-content"></p>

      <div class="comments">
        <ul class="comment-list"></ul>

        <form class="comment-form" aria-label="PridaÅ¥ komentÃ¡r">
          <input class="comment-input" type="text" placeholder="NapÃ­Å¡ komentÃ¡r..." required>
          <button class="btn small">OdoslaÅ¥</button>
        </form>
      </div>
    </li>
  </template>
{% endblock %}


