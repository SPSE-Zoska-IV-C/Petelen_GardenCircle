{% extends 'base.html' %}

{% block title %}GardenCircle â€” Novinky{% endblock %}

{% block content %}
  <section class="card">
    <header class="section-header">
      <h2>Novinky</h2>
      <p class="muted">KrÃ¡tke sprÃ¡vy zo sveta prÃ­rody a udrÅ¾ateÄ¾nosti</p>
    </header>
    
    {% if error_message %}
      <div class="text-center" style="padding: var(--space-2xl);">
        <p class="muted" style="font-size: var(--font-size-lg);">{{ error_message }}</p>
      </div>
    {% endif %}

    <div style="display:flex; justify-content:flex-end; margin-bottom: .75rem;">
      <a class="btn btn-secondary" href="{{ url_for('news') }}?refresh=1">ðŸ”„ ObnoviÅ¥</a>
    </div>

    <div class="articles-grid">
      {% for a in articles %}
        <article class="article-card fade-in" style="transition: transform .2s ease, box-shadow .2s ease;">
          {% set thumb = a.image or url_for('static', filename='img/leaf.svg') %}
          <a href="{{ a.link }}" target="_blank" rel="noopener" aria-label="PrejsÅ¥ na ÄlÃ¡nok">
            <img src="{{ thumb }}" alt="{{ a.title }}" loading="lazy">
          </a>
          <div class="content">
            <h3><a href="{{ a.link }}" target="_blank" rel="noopener">{{ a.title }}</a></h3>
            <p>{{ (a.summary or '')[:180] }}{% if a.summary and a.summary|length > 180 %}...{% endif %}</p>
            <div class="meta muted">
              <span>{{ a.source or 'Unknown source' }}</span>
              {% if a.published_at %}
                <span>â€¢ {{ a.published_at }}</span>
              {% endif %}
            </div>
            <div class="actions">
              <a class="btn btn-secondary" href="{{ a.link }}" target="_blank" rel="noopener">ÄŒÃ­taÅ¥ viac</a>
            </div>
          </div>
        </article>
      {% else %}
        <div class="text-center" style="grid-column: 1 / -1; padding: var(--space-2xl);">
          <p class="muted" style="font-size: var(--font-size-lg);">No nature news found at the moment. Please check back later.</p>
        </div>
      {% endfor %}
    </div>
  </section>
{% endblock %}